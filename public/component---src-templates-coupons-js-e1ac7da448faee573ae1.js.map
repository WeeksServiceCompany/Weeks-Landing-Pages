{"version":3,"sources":["webpack:///./src/templates/coupons.js"],"names":["query","today","Date","getDay","printCoupon","window","print","city","hash","vars","hashes","location","href","slice","indexOf","split","i","length","push","getUrlVars","ourServices","$","attr","undefined","CouponsPage","data","sanityCompanyInfo","companyname","sanityPages","pagetitle","style","height","backgroundPosition","fluid","headerimage","asset","className","backgroundColor","primarycolor","hex","opacity","borderColor","accentcolor","color","coupon","title","type","onClick","blocks","_rawFirstcopy","allSanityCoupon","edges","map","node","key","slug","serviceimage","_rawServices"],"mappings":"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","file":"component---src-templates-coupons-js-e1ac7da448faee573ae1.js","sourcesContent":["import React from 'react';\r\nimport { graphql, Link } from 'gatsby';\r\nimport Layout from \"../components/layout\"\r\nimport BlockContent from '../components/block-content'\r\nimport BackgroundImage from 'gatsby-background-image'\r\nimport { FaPrint } from \"react-icons/fa\"\r\nimport Form from \"../components/form\"\r\nimport Helmet from 'react-helmet'\r\nimport $ from 'jquery'\r\n\r\nexport const query = graphql`\r\n    query couponsQuery{\r\n        sanityPages(slug: {current: {eq: \"coupons\"}}) {\r\n            pagetitle\r\n            slug {\r\n                current\r\n            }\r\n            _rawFirstcopy\r\n            _rawServices\r\n            _rawSecondcopy\r\n            coupon {\r\n                title\r\n                type\r\n            }\r\n            headerimage {\r\n                asset {\r\n                    fluid(maxWidth: 1920) {\r\n                        ...GatsbySanityImageFluid\r\n                    }\r\n                }\r\n            }\r\n            serviceimage {\r\n                asset {\r\n                    fluid(maxWidth: 1920) {\r\n                      ...GatsbySanityImageFluid\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        allSanityCoupon{\r\n            edges{\r\n                node{\r\n                    title\r\n                    type\r\n                }\r\n            }\r\n        }\r\n        sanityCompanyInfo {\r\n            companyname\r\n            primarycolor{\r\n                hex\r\n            }\r\n            secondarycolor{\r\n                hex\r\n            }\r\n            accentcolor{\r\n                hex\r\n            }\r\n        }\r\n    }\r\n\r\n`\r\n\r\nconst now = new Date();\r\nconst days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\nconst today = days[now.getDay()];\r\n\r\nfunction printCoupon() {\r\n    if(typeof window !== 'undefined'){\r\n        window.print();\r\n    }\r\n  }\r\n\r\n/* ADD CITY TO OUR SERVICES LINK */\r\nfunction getUrlVars(){\r\n    var vars = [], hash;\r\n    if(typeof window !== 'undefined'){\r\n        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n        for(var i = 0; i < hashes.length; i++)\r\n        {\r\n            hash = hashes[i].split('=');\r\n            vars.push(hash[0]);\r\n            vars[hash[0]] = hash[1];\r\n        }\r\n    }\r\n    return vars;\r\n  }\r\nvar city = getUrlVars()[\"city\"];\r\n\r\nconst ourServices = \"/our-services?city=\" + city;\r\n\r\nif(city === null) {\r\n    city = \"\";\r\n    if(typeof window !== 'undefined'){\r\n        $(\".ourServices\").attr('href', \"/our-services/\");\r\n    }\r\n} else if(city === \"\"){\r\n    city = \"\";\r\n    if(typeof window !== 'undefined'){\r\n        $(\".ourServices\").attr('href', \"/our-services/\");\r\n    }\r\n} else if(city !== undefined){\r\n    city = \" in \" + city;\r\n    if(typeof window !== 'undefined'){\r\n        $(\".ourServices\").attr('href', ourServices);\r\n    }\r\n} \r\n\r\n\r\n\r\nconst CouponsPage = ({ data }) => (\r\n    <Layout>\r\n        <Helmet>\r\n            <title>{data.sanityCompanyInfo.companyname} | {data.sanityPages.pagetitle}</title>\r\n        </Helmet>\r\n        <Form />\r\n        <BackgroundImage\r\n            style={{\r\n                height: \"100%\",\r\n                backgroundPosition: \"center\"\r\n            }}\r\n            fluid={data.sanityPages.headerimage.asset.fluid}>\r\n\r\n            <div className=\"pageHeader\">\r\n                <div className=\"innerLeft\">\r\n                    <div className=\"pgHeaderBackground\" style={{\r\n                        backgroundColor: data.sanityCompanyInfo.primarycolor.hex,\r\n                        opacity: \"0.9\"\r\n                    }}></div>\r\n                    <h1 style={{ borderColor: data.sanityCompanyInfo.accentcolor.hex }}>{data.sanityPages.pagetitle}</h1>\r\n                    <p>Call This <b style={{color: data.sanityCompanyInfo.accentcolor.hex}}>{today}</b> for </p>\r\n                    <p className=\"coupon\">{data.sanityPages.coupon.title}</p>\r\n                    <p className=\"couponType\">{data.sanityPages.coupon.type}</p>\r\n                    <p className=\"restrictions\">*Restrictions may apply</p>\r\n                    <span className=\"printCoupon\" onClick={printCoupon} style={{ backgroundColor: data.sanityCompanyInfo.accentcolor.hex }}><FaPrint /> <span className=\"mobileCouponText\">Claim Offer</span></span>\r\n                </div>\r\n\r\n            </div>\r\n        </BackgroundImage>\r\n        <div className=\"couponsPage\">\r\n            <div className=\"container pageContent\">\r\n                <div className=\"row\">\r\n                    <BlockContent blocks={data.sanityPages._rawFirstcopy} />\r\n                </div>\r\n                <div className=\"row couponsRow\">\r\n                    <ul>\r\n                        {data.allSanityCoupon.edges.map(({ node: coupon }) => (\r\n                            <li className=\"coupon\" key={coupon.title} style={{ backgroundColor: data.sanityCompanyInfo.primarycolor.hex }}>\r\n                                <span key={coupon.title} className=\"couponTitle\">{coupon.title}</span>\r\n                                <br />\r\n                                <span key={coupon.type} className=\"couponType\">{coupon.type}</span>\r\n                                <br />\r\n                                <span key={coupon.slug} className=\"restrictions\">*Restrictions may apply. Call office for details.</span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n\r\n            </div>\r\n            <div className=\"row servicesRow\">\r\n                <div className=\"leftSection\">\r\n                    <BackgroundImage\r\n                        style={{ height: \"100%\" }}\r\n                        fluid={data.sanityPages.serviceimage.asset.fluid}>\r\n                    </BackgroundImage>\r\n                </div>\r\n                <div className=\"rightSection\" style={{ backgroundColor: data.sanityCompanyInfo.primarycolor.hex }}>\r\n                    <h2>Our Services</h2>\r\n                    <BlockContent blocks={data.sanityPages._rawServices} />\r\n                    <a className=\"ourServices\" href=\"\" style={{ backgroundColor: data.sanityCompanyInfo.accentcolor.hex }}>View our Services</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </Layout>\r\n)\r\n\r\nexport default CouponsPage"],"sourceRoot":""}