{"version":3,"sources":["webpack:///./src/templates/ourServices.js"],"names":["query","today","Date","getDay","printCoupon","window","print","getUrlVars","hash","vars","hashes","location","href","slice","indexOf","split","i","length","push","city","undefined","serializers","marks","internalLink","mark","children","slug","to","data","sanityCompanyInfo","companyname","sanityPages","pagetitle","style","height","backgroundPosition","fluid","headerimage","asset","className","backgroundColor","primarycolor","hex","opacity","borderColor","accentcolor","color","coupon","title","type","onClick","blocks","_rawFirstcopy","$","attr","serviceimage","_rawServices"],"mappings":"iRAcaA,EAAK,aA6DZC,EADO,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aADpE,IAAIC,MAEOC,UAIvB,SAASC,IACgB,oBAAXC,QACNA,OAAOC,QAIf,SAASC,IACL,IAAeC,EAAXC,EAAO,GACX,GAAqB,oBAAXJ,OAEN,IADA,IAAIK,EAASL,OAAOM,SAASC,KAAKC,MAAMR,OAAOM,SAASC,KAAKE,QAAQ,KAAO,GAAGC,MAAM,KAC7EC,EAAI,EAAGA,EAAIN,EAAOO,OAAQD,IAE9BR,EAAOE,EAAOM,GAAGD,MAAM,KACvBN,EAAKS,KAAKV,EAAK,IACfC,EAAKD,EAAK,IAAMA,EAAK,GAG7B,OAAOC,EAEX,IAAIU,EAAOZ,IAAU,KAET,OAATY,EACCA,EAAO,GACQ,KAATA,EACNA,EAAO,QACQC,IAATD,IACNA,EAAO,OAASA,GAiBpB,IAAME,EAAc,CAChBC,MAAO,CACHC,aAAc,YAAuB,IAArBC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,SACED,EAAbE,KAEP,OAAO,kBAAC,IAAD,CAAMC,GADH,+BACcF,MAQrB,0BAAGG,EAAH,EAAGA,KAAH,OACX,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,+BAAQA,EAAKC,kBAAkBC,YAA/B,MAA+CF,EAAKG,YAAYC,YAGpE,kBAAC,IAAD,MACA,kBAAC,IAAD,CACIC,MAAO,CACHC,OAAQ,OACRC,mBAAoB,UAExBC,MAAOR,EAAKG,YAAYM,YAAYC,MAAMF,OAE1C,yBAAKG,UAAU,cACX,yBAAKA,UAAU,aACX,yBAAKA,UAAU,qBAAqBN,MAAO,CACvCO,gBAAiBZ,EAAKC,kBAAkBY,aAAaC,IACrDC,QAAS,SAGb,wBAAIV,MAAO,CAAEW,YAAahB,EAAKC,kBAAkBgB,YAAYH,MAAQd,EAAKG,YAAYC,UAAtF,IAAkGb,GAClG,uBAAGoB,UAAU,QAAb,aAA8B,uBAAGN,MAAO,CAACa,MAAOlB,EAAKC,kBAAkBgB,YAAYH,MAAOzC,GAA1F,SACA,uBAAGsC,UAAU,UAAUX,EAAKG,YAAYgB,OAAOC,OAC/C,uBAAGT,UAAU,cAAcX,EAAKG,YAAYgB,OAAOE,MACnD,uBAAGV,UAAU,gBAAb,2BAOA,0BAAMA,UAAU,cAAcW,QAAS9C,EAAa6B,MAAO,CAAEO,gBAAiBZ,EAAKC,kBAAkBgB,YAAYH,MAAO,kBAAC,IAAD,MAAxH,IAAoI,0BAAMH,UAAU,oBAAhB,mBAKhJ,kBAAC,IAAD,MACA,yBAAKA,UAAU,mBACX,yBAAKA,UAAU,yBACX,yBAAKA,UAAU,iBACP,kBAAC,IAAD,CAAcY,OAAQvB,EAAKG,YAAYqB,cAAe/B,YAAaA,EAAa6B,aAhE/E,oBAAX7C,aAAmCe,IAATD,GAChCkC,IAAE,qBAAqBC,KAAK,OAAQ,SAAStC,EAAGJ,GAE5C,OAAOA,EAAO,UADdO,EAAMZ,IAAU,aAiEhB,yBAAKgC,UAAU,mBACX,yBAAKA,UAAU,eACX,kBAAC,IAAD,CACIN,MAAO,CAAEC,OAAQ,QACjBE,MAAOR,EAAKG,YAAYwB,aAAajB,MAAMF,SAGnD,yBAAKG,UAAU,eAAeN,MAAO,CAAEO,gBAAiBZ,EAAKC,kBAAkBY,aAAaC,MACxF,0BAAMH,UAAU,qBAAoB,6CACpC,wBAAIN,MAAO,CAAEO,gBAAiBZ,EAAKC,kBAAkBgB,YAAYH,OACjE,kBAAC,IAAD,CAAcS,OAAQvB,EAAKG,YAAYyB","file":"component---src-templates-our-services-js-23c634c70f56c40e7389.js","sourcesContent":["/*** IMPORTS  ****/\r\nimport  React from 'react'\r\nimport { graphql } from 'gatsby'\r\nimport Layout from \"../components/layout\"\r\nimport Helmet from 'react-helmet'\r\nimport { Link } from \"gatsby\"\r\nimport BlockContent from '../components/block-content'\r\nimport BackgroundImage from 'gatsby-background-image'\r\nimport { FaPrint } from \"react-icons/fa\"\r\nimport Form from \"../components/form\"\r\nimport PortableText from '@sanity/block-content-to-react'\r\nimport $ from 'jquery'\r\n\r\n/**** GRAPHQL QUERY *****/\r\nexport const query = graphql`\r\n    query ourservicespageQuery {\r\n        sanityPages(slug: {current: {eq: \"our-services\"}}) {\r\n            pagetitle\r\n            slug {\r\n                current\r\n            }\r\n            _rawFirstcopy(resolveReferences: { maxDepth: 10 })\r\n            firstcopy {\r\n            sanityChildren {\r\n                marks\r\n                text\r\n                _type\r\n                _key\r\n            }\r\n            list\r\n            _type\r\n            _key\r\n            style\r\n            }\r\n            _rawServices\r\n            _rawSecondcopy\r\n            coupon {\r\n                title\r\n                type\r\n                printable\r\n            }\r\n            headerimage {\r\n                asset {\r\n                    fluid(maxWidth: 1920) {\r\n                        ...GatsbySanityImageFluid\r\n                    }\r\n                }\r\n            }\r\n            serviceimage {\r\n                asset {\r\n                    fluid(maxWidth: 1920) {\r\n                      ...GatsbySanityImageFluid\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        sanityCompanyInfo {\r\n            companyname\r\n            primarycolor{\r\n                hex\r\n            }\r\n            secondarycolor{\r\n                hex\r\n            }\r\n            accentcolor{\r\n                hex\r\n            }\r\n            cities\r\n        }\r\n    }\r\n`\r\n\r\n/***** GET CURRENT DAY *****/\r\nconst now = new Date();\r\nconst days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\nconst today = days[now.getDay()];\r\n\r\n\r\n/***** FUNCTION TO PRINT OUT COUPONS *****/\r\nfunction printCoupon() {\r\n    if(typeof window !== 'undefined'){\r\n        window.print();\r\n    }\r\n}\r\n/***** FUNCTION TO GET THE CITY PARAMETER FROM URL *****/\r\nfunction getUrlVars(){\r\n    var vars = [], hash;\r\n    if(typeof window !== 'undefined'){\r\n        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n        for(var i = 0; i < hashes.length; i++)\r\n        {\r\n            hash = hashes[i].split('=');\r\n            vars.push(hash[0]);\r\n            vars[hash[0]] = hash[1];\r\n        }\r\n    }\r\n    return vars;\r\n  }\r\nvar city = getUrlVars()[\"city\"];\r\n\r\nif(city === null) {\r\n    city = \"\";\r\n} else if(city === \"\"){\r\n    city = \"\";\r\n} else if(city !== undefined){\r\n    city = \" in \" + city;\r\n} \r\n \r\n\r\n\r\n/***** ADD CITY TO URLS IN PAGE *****/\r\nfunction addCity(){\r\n    if(typeof window !== 'undefined' && city !== undefined){\r\n        $('div.pageContent a').attr('href', function(i, href){\r\n            city= getUrlVars()['city'];\r\n            return href + \"?city=\" +  city; \r\n        });\r\n    }  \r\n}\r\n\r\n\r\n/***** FUNCTION FOR BLOCK CONTENT LINKS *****/\r\nconst serializers = {\r\n    marks: {\r\n        internalLink: ({mark, children}) => {\r\n            const {slug = {}} = mark\r\n            const href = `/{slug.current}?city={city}`\r\n            return <Link to={href}>{children}</Link>\r\n          }\r\n      }\r\n  }\r\n\r\n\r\n\r\n\r\nexport default ({ data }) => (\r\n    <Layout>\r\n        <Helmet>\r\n            <title>{data.sanityCompanyInfo.companyname} | {data.sanityPages.pagetitle}</title>\r\n\r\n        </Helmet>\r\n        <Form /> \r\n        <BackgroundImage\r\n            style={{\r\n                height: \"100%\",\r\n                backgroundPosition: \"center\"\r\n            }}\r\n            fluid={data.sanityPages.headerimage.asset.fluid}>\r\n\r\n            <div className=\"pageHeader\">\r\n                <div className=\"innerLeft\" >\r\n                    <div className=\"pgHeaderBackground\" style={{\r\n                        backgroundColor: data.sanityCompanyInfo.primarycolor.hex,\r\n                        opacity: \"0.9\"\r\n                    }}></div>\r\n\r\n                    <h1 style={{ borderColor: data.sanityCompanyInfo.accentcolor.hex }}>{data.sanityPages.pagetitle} {city}</h1>\r\n                    <p className=\"date\">Call This <b style={{color: data.sanityCompanyInfo.accentcolor.hex}}>{today}</b> for </p>\r\n                    <p className=\"coupon\">{data.sanityPages.coupon.title}</p>\r\n                    <p className=\"couponType\">{data.sanityPages.coupon.type}</p>\r\n                    <p className=\"restrictions\">*Restrictions may apply</p>\r\n\r\n                    {\r\n                        // IF COUPON IS PRINTABLE -> SHOW PRINT BUTTON\r\n                        // data.sanityPages.coupon.printable  && <span className=\"printCoupon\" onClick={printCoupon} style={{ backgroundColor: data.sanityCompanyInfo.accentcolor.hex }}><FaPrint /> <span className=\"mobileCouponText\">Claim Offer</span></span> }\r\n                    }\r\n\r\n                    <span className=\"printCoupon\" onClick={printCoupon} style={{ backgroundColor: data.sanityCompanyInfo.accentcolor.hex }}><FaPrint /> <span className=\"mobileCouponText\">Claim Offer</span></span>\r\n                </div>\r\n\r\n            </div>\r\n        </BackgroundImage>\r\n        <Form />\r\n        <div className=\"ourServicesPage\">\r\n            <div className=\"container pageContent\" >\r\n                <div className=\"row firstCopy\">\r\n                        <PortableText blocks={data.sanityPages._rawFirstcopy} serializers={serializers} onClick={addCity()} />\r\n                </div>\r\n            </div>\r\n            <div className=\"row servicesRow\">\r\n                <div className=\"leftSection\">\r\n                    <BackgroundImage\r\n                        style={{ height: \"100%\" }}\r\n                        fluid={data.sanityPages.serviceimage.asset.fluid}>\r\n                    </BackgroundImage>\r\n                </div>\r\n                <div className=\"rightSection\" style={{ backgroundColor: data.sanityCompanyInfo.primarycolor.hex }}>\r\n                    <span className=\"rightSectionTitle\"><h2>Our Services</h2></span>\r\n                    <hr style={{ backgroundColor: data.sanityCompanyInfo.accentcolor.hex }} />\r\n                    <BlockContent blocks={data.sanityPages._rawServices} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </Layout>\r\n)\r\n"],"sourceRoot":""}